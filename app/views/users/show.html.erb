<% if @user.patient? %>
  <div class="container-show-patient">
    <div class="patient-profile flex-column p-4">
      <% if @user.photo.attached? %>
        <%= cl_image_tag @user.photo.key, height: 300, width: 400, crop: :fill %>
      <% end %>
      <div class="card-profile-patient mx-auto d-block">
        <% if @user.id == current_user.id %>
          <%= link_to "Editar perfil", edit_user_registration_path %>
        <% end %>
        <h1 class="text-center my-3"><%= @user.name.capitalize %> <%= @user.surname.capitalize %> </h1>
        <div class="birthdate text-center my-3">
          <p> <%= @user.role.capitalize %> </p>
          <p> Data de Nascimento: <%= @user.birthdate %> </p>
        </div>
        <div class="birthdate text-center my-3">
          <p> Descrição: <%= @user.description %> </p>
        </div>
        <div class="links-profile row mx-auto d-block">
          <%= link_to "Consultas", users_path, class: "btn btn-primary col-4 m-3" %>
          <%= link_to "Mensagens", chatrooms_path(@user.id), class: "btn btn-primary col-4 m-3" %>
          <%= link_to "Sair", destroy_user_session_path, data: {turbo_method: :delete}, class: "btn btn-primary m-3 mx-auto d-block" %>
        </div>
      </div>
    </div>
  </div>
<% else %>
  <div class="container-show-therapist">
    <div class="patient-profile flex-column p-4">
      <% if @user.photo.attached? %>
        <%= cl_image_tag @user.photo.key, height: 300, width: 400, crop: :fill %>
      <% end %>
      <div class="card-profile-therapist mx-auto d-block">
        <% if @user.id == current_user.id %>
          <%= link_to "Editar perfil", edit_user_registration_path %>
        <% end %>
        <h1 class="text-center my-3"><%= @user.name.capitalize %> <%= @user.surname.capitalize %> </h1>
        <div class="birthdate text-center my-3">
          <p> <%= @user.role.capitalize %> </p>
          <p> Data de Nascimento: <%= @user.birthdate %> </p>
        </div>
        <div class="birthdate text-center my-3">
          <p> Descrição: <%= @user.description %> </p>
        </div>
        <div class="links-profile row mx-auto d-block">
          <%= link_to "Consultas", user_appointments_path(@user.id), class: "btn btn-primary col-3 m-3" %>
          <% if Chatroom.where(patient_id: current_user.id, therapist_id: @user.id).count > 0 %>
            <%= link_to "Mensagens", chatroom_path(id: Chatroom.where(patient_id: current_user.id, therapist_id: @user.id).first.id), class: "btn btn-primary col-3 m-3" %>
          <% else %>
            <%= link_to "Conversar com #{@user.name}", chatrooms_path(user_id: @user.id), data: { turbo_method: :post }, class: "btn btn-primary col-3 m-3" %>
          <% end %>
          <%= link_to "Agendar consulta", new_user_appointment_path(@user.id), class: "btn btn-primary col-3 m-3" %>
          <%= link_to "Sair", destroy_user_session_path, data: {turbo_method: :delete}, class: "btn btn-primary m-3 mx-auto d-block" %>
        </div>
      </div>
    </div>
  </div>
<% end %>
