<div class="appointments-container">
  <% if @appointments.present? %>
    <% @appointments.each do |appointment| %>
      <% if current_user.patient? %>
        <div class="appointment-index d-flex justify-content-between my-2 px-2">
          <div class="infos d-flex">
            <div class="foto m-4">
              <% if appointment.patient.photo.attached? %>
                <%= cl_image_tag appointment.patient.photo.key, transformation: [{width: 80, height: 80, radius: "max", gravity: "auto", crop: "fill", fetch_format: "auto" }], class:"profile-avatar" %>
              <% else %>
                <span class=" mb-1 avatar avatar-circle" style="background-image: url( 'https://cdn-icons-png.flaticon.com/512/3607/3607444.png')"></span>
              <% end %>
            </div>
            <div class="d-flex flex-column pt-4">
              <div class="com-quem m-1">
                <p class=""><strong>Sua consulta será com:  </strong><%= appointment.patient.name.capitalize %> <%= appointment.patient.surname.capitalize %></p>
              </div>

              <div class="data-e-hora m-1">
                <p><strong>Data: </strong><%= appointment.start_time.strftime('%d/%m/%Y') %></p>
                <p><strong>Hora: </strong><%= appointment.end_time.strftime('%H:%M') %></p>
              </div>
            </div>
          </div>

          <div class="botao mt-4">
            <%= link_to "Ver detalhes", appointment_path(appointment), class: "btn-detalhes" %>
          </div>
        </div>
      <% else %>
        <div class="appointment-index d-flex justify-content-between my-2 px-2">
          <div class="infos d-flex">
            <div class="foto m-4">
              <% if appointment.patient.photo.attached? %>
                <%= cl_image_tag appointment.patient.photo.key, transformation: [{width: 80, height: 80, radius: "max", gravity: "auto", crop: "fill", fetch_format: "auto" }], class:"profile-avatar" %>
              <% else %>
                <span class=" mb-1 avatar avatar-circle" style="background-image: url( 'https://cdn-icons-png.flaticon.com/512/3607/3607444.png')"></span>
              <% end %>
            </div>
            <div class="d-flex flex-column pt-4">
              <div class="com-quem m-1">
                <p class=""><strong>Sua consulta será com:  </strong><%= appointment.patient.name.capitalize %> <%= appointment.patient.surname.capitalize %></p>
              </div>

              <div class="data-e-hora m-1">
                <p><strong>Data: </strong><%= appointment.start_time.strftime('%d/%m/%Y') %></p>
                <p><strong>Hora: </strong><%= appointment.end_time.strftime('%H:%M') %></p>
              </div>
            </div>
          </div>

          <div class="botao mt-4">
            <%= link_to "Ver detalhes", appointment_path(appointment), class: "btn-detalhes" %>
          </div>
        </div>
      <% end %>
    <% end %>
  <% else %>
    <div class="no-appointments col-12 row justify-content-center mt-5 ">
      <p class="text-center col-12 m-4">Você ainda não tem consultas agendadas.</p>
      <i class="fa-regular fa-face-frown-open fa-2xl text-center" style="color: #717171;"></i>
    </div>
  <% end %>
</div>
